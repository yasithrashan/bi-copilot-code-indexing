# Ballerina Code Expansion

**Query:** Extend the category service to also support update and delete operations for categories.

---

## main.bal

```ballerina
import ballerina/http;
import ballerina/time;
import ballerina/uuid;
```

```ballerina
configurable int servicePort = 8080;
configurable string serviceName = "Bookstore API";
configurable int maxBooksPerPage = 10;
configurable boolean debugMode = false;
```

```ballerina
int totalRequests = 0;
time:Utc serviceStartTime = time:utcNow();
map<BookCategory> bookCategories = {};
```

```ballerina
service /admin on new http:Listener(servicePort) {

    // Get service statistics
    resource function get stats() returns ServiceStats {
        totalRequests += 1;

        string startTimeString = time:utcToString(serviceStartTime);

        ServiceStats stats = {
            totalRequests: totalRequests,
            totalBooks: bookStore.length(),
            serviceStartTime: startTimeString,
            serviceName: serviceName,
            debugMode: debugMode
        };

        return stats;
    }

    // Add book category
    resource function post categories(@http:Payload BookCategory category) returns http:Created|http:BadRequest {
        totalRequests += 1;

        if category.categoryName.trim().length() == 0 {
            return http:BAD_REQUEST;
        }

        bookCategories[category.categoryId] = category;
        return http:CREATED;
    }

    // Get all categories
    resource function get categories() returns BookCategory[] {
        totalRequests += 1;
        return bookCategories.toArray();
    }
}
```

## types.bal

```ballerina
// Book category type
public type BookCategory record {|
    string categoryId;
    string categoryName;
    string description;
|};
```

---

*Code expansion generated from 8 relevant chunks across 2 files*
