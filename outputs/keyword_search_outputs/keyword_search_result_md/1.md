## Query ID: 1
**Query:** Update the pagination logic so it validates 'page' and 'limit' values, returning a 400 Bad Request if they are less than or equal to zero

**Results:**

### Chunk 01
**Score:** 6.2438
**ID:** 7a4534bd95f7b4d4

```ballerina
int startIndex = (page - 1) * 'limit;
```

### Chunk 02
**Score:** 5.8591
**ID:** 327ac08ac6d21f00

```ballerina
resource function get books(int page = 1, int 'limit = maxBooksPerPage) returns PaginatedBooks|http:InternalServerError {
        totalRequests += 1;

        Book[] allBooks = bookStore.toArray();
        int totalCount = allBooks.length();
        int startIndex = (page - 1) * 'limit;
        int endIndex = startIndex + 'limit;

        if startIndex >= totalCount {
            PaginatedBooks emptyResult = {
                books: [],
                totalCount: totalCount,
                currentPage: page,
                totalPages: (totalCount + 'limit - 1) / 'limit
            };
            return emptyResult;
        }

        if endIndex > totalCount {
            endIndex = totalCount;
        }

        Book[] paginatedBooks = [];
        int index = startIndex;
        while index < endIndex {
            paginatedBooks.push(allBooks[index]);
            index += 1;
        }

        PaginatedBooks result = {
            books: paginatedBooks,
            totalCount: totalCount,
            currentPage: page,
            totalPages: (totalCount + 'limit - 1) / 'limit
        };

        return result;
    }
```

### Chunk 03
**Score:** 5.5180
**ID:** b085064b48b44dc1

```ballerina
PaginatedBooks emptyResult = {
                books: [],
                totalCount: totalCount,
                currentPage: page,
                totalPages: (totalCount + 'limit - 1) / 'limit
            };
```

### Chunk 04
**Score:** 5.3722
**ID:** 9f35e5bd664da7d4

```ballerina
PaginatedBooks result = {
            books: paginatedBooks,
            totalCount: totalCount,
            currentPage: page,
            totalPages: (totalCount + 'limit - 1) / 'limit
        };
```

### Chunk 05
**Score:** 3.1170
**ID:** 6af145538d779e1f

```ballerina
int endIndex = startIndex + 'limit;
```
