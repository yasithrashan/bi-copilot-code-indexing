## Query ID: 2
**Query:** Modify the PUT /books/{bookId} endpoint to reuse the validation logic (validateAndFormatBook) so updates also check for empty titles, negative prices, etc.

**Results:**

### Chunk 01
**Score:** 5.7152
**ID:** 6b2159a447de8988

```ballerina
function validateAndFormatBook(BookRequest bookRequest) returns Book|error {
    if bookRequest.title.trim().length() == 0 {
        return error("Book title cannot be empty");
    }

    if bookRequest.author.trim().length() == 0 {
        return error("Book author cannot be empty");
    }

    if bookRequest.price < 0.0d {
        return error("Book price cannot be negative");
    }

    if bookRequest.quantity < 0 {
        return error("Book quantity cannot be negative");
    }

    string bookId = uuid:createType1AsString();

    Book validatedBook = {
        id: bookId,
        title: bookRequest.title.trim(),
        author: bookRequest.author.trim(),
        isbn: bookRequest.isbn.trim(),
        price: bookRequest.price,
        quantity: bookRequest.quantity
    };

    return validatedBook;
}
```

### Chunk 02
**Score:** 3.6204
**ID:** b71ed9d1cfeac8c4

```ballerina
Book|error validatedBook = validateAndFormatBook(bookRequest);
```

### Chunk 03
**Score:** 2.8693
**ID:** c35d06be35ebb271

```ballerina
string bookId = uuid:createType1AsString();
```

### Chunk 04
**Score:** 2.6271
**ID:** fc2e7e4b21fc3ec8

```ballerina
Book book = bookStore.get(k = bookId);
```

### Chunk 05
**Score:** 2.6271
**ID:** bf62c5ab5502e978

```ballerina
Book removedBook = bookStore.remove(k = bookId);
```
