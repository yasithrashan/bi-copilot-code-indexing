# Ballerina Code Expansion

**Query:** Add a new HTTP server to the current implementation.

---

Based on the user query and the relevant chunks provided, here's the expanded and organized Ballerina code to add a new HTTP server to the current implementation:

## main.bal

### Imports
```ballerina
import ballerina/http;
```

### Configuration Variables
```ballerina
configurable int servicePort = 8080;
configurable string serviceName = "Bookstore API";
```

### Module Level Variables
```ballerina
int totalRequests = 0;
map<BookCategory> bookCategories = {};
map<Book> bookStore = {};
```

### Services
```ballerina
service /bookstore on new http:Listener(servicePort) {
    // Existing bookstore service implementation
}

service /admin on new http:Listener(servicePort) {
    // Existing admin service implementation
}

// New HTTP server
service /newservice on new http:Listener(servicePort + 1) {
    // New service implementation can be added here
}
```

### Resources
```ballerina
resource function post books(@http:Payload BookRequest bookRequest) returns http:Created|http:BadRequest|http:InternalServerError {
    totalRequests += 1;

    Book|error validatedBook = validateAndFormatBook(bookRequest);
    if validatedBook is error {
        return http:BAD_REQUEST;
    }

    bookStore[validatedBook.id] = validatedBook;
    return http:CREATED;
}

resource function post categories(@http:Payload BookCategory category) returns http:Created|http:BadRequest {
    totalRequests += 1;

    if category.categoryName.trim().length() == 0 {
        return http:BAD_REQUEST;
    }

    bookCategories[category.categoryId] = category;
    return http:CREATED;
}
```

## types.bal

```ballerina
public type Book record {|
    string id;
    string title;
    string author;
    string isbn;
    decimal price;
    int quantity;
|};

public type BookRequest record {|
    string title;
    string author;
    string isbn;
    decimal price;
    int quantity;
|};

public type BookCategory record {|
    string categoryId;
    string categoryName;
    string description;
|};
```

---

*Code expansion generated from 8 relevant chunks across 1 files*
