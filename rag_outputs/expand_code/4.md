# Ballerina Code Expansion

**Query:** Extend the category service to also support update and delete operations for categories.

---

Based on the provided code and the user query, I will expand and organize the relevant Ballerina code to include update and delete operations for categories. Here's the expanded code:

## Filename: main.bal

Imports:
```ballerina
import ballerina/http;
import ballerina/time;
import ballerina/uuid;
```

Configuration Variables:
```ballerina
configurable int servicePort = 8080;
configurable string serviceName = "Bookstore API";
```

Module Level Variables:
```ballerina
int totalRequests = 0;
map<BookCategory> bookCategories = {};
```

Services:
```ballerina
service /admin on new http:Listener(servicePort) {
    // Existing resources...

    // Add book category
    resource function post categories(@http:Payload BookCategory category) returns http:Created|http:BadRequest {
        totalRequests += 1;

        if category.categoryName.trim().length() == 0 {
            return http:BAD_REQUEST;
        }

        bookCategories[category.categoryId] = category;
        return http:CREATED;
    }

    // Get all categories
    resource function get categories() returns BookCategory[] {
        totalRequests += 1;
        return bookCategories.toArray();
    }

    // Update a category
    resource function put categories/[string categoryId](@http:Payload BookCategory category) returns BookCategory|http:NotFound|http:BadRequest {
        totalRequests += 1;

        if !bookCategories.hasKey(categoryId) {
            return http:NOT_FOUND;
        }

        if category.categoryName.trim().length() == 0 {
            return http:BAD_REQUEST;
        }

        category.categoryId = categoryId;
        bookCategories[categoryId] = category;
        return category;
    }

    // Delete a category
    resource function delete categories/[string categoryId]() returns http:NoContent|http:NotFound {
        totalRequests += 1;

        if !bookCategories.hasKey(categoryId) {
            return http:NOT_FOUND;
        }

        _ = bookCategories.remove(categoryId);
        return http:NO_CONTENT;
    }
}
```

## Filename: types.bal

```ballerina
// Book category type
public type BookCategory record {|
    string categoryId;
    string categoryName;
    string description;
|};
```

---

*Code expansion generated from 8 relevant chunks across 2 files*
